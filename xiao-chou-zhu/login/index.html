<!DOCTYPE html>
<html lang='en'>    
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

        <link rel="icon" href="../static/images/icon.png">

        <link rel="stylesheet" href="../static/stylesheets/global.css">
        <link rel="stylesheet" href="../static/stylesheets/login.css">

        <title>小臭豬</title>
    </head>
    <body>        
        <div id="loader" style="display: none;"></div>
        
        <div id='login'>
            <p class='greeter'>{{ greeter }}</p>
            <img src="../static/images/icon.png" alt="logo" class="logo"/>
            <div style="padding-top: 4vh;">
                <div><p class='entry_f'>{{ username }}</p></div>
                <input type="normal" id="usn" class='inp' placeholder="請輸入" spellcheck="false"/>
            </div>
            <div style="padding-top: 2vh;">
                <div><p class='entry_f'>{{ password }}</p></div>
                <input type="password" id="pswd" class='inp' placeholder="請輸入" spellcheck="false"/>
            </div> 
            <br/>
            <button onclick="sign_in()" id="sign_in_button" type="button" class="btn btn-primary btn-lg">
                {{ login }}
            </button>

            <div id = 'error'></div>
        </div>
        
        
        <script src="../lib/firebase-7.10.0/firebase-app.js"></script>
        <script src="../lib/firebase-7.10.0/firebase-auth.js"></script>
        <script src="../lib/firebase-7.10.0/firebase-database.js"></script>
        <script>
            var firebaseConfig = {
                apiKey: "AIzaSyDunxM_CsmBvE-qml3GHsCYKGT774lHhpE",
                authDomain: "xiao-chou-zhu.firebaseapp.com",
                databaseURL: "https://xiao-chou-zhu.firebaseio.com",
                projectId: "xiao-chou-zhu",
                storageBucket: "xiao-chou-zhu.appspot.com",
                messagingSenderId: "826168077131",
                appId: "1:826168077131:web:f2a644c2ef916b47dc96ce"
            };

            firebase.initializeApp(firebaseConfig);

            document.getElementById("pswd").addEventListener("keydown", function(event){
                if (event.keyCode==13){
                    event.preventDefault;
                    document.getElementById("sign_in_button").click();
                }
            })

            var user = firebase.auth().currentUser;

            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    window.location.href = "../index.html";
                } else {}
            });
        </script>
        <script src="../scripts/login.js"></script>
        <script src="../scripts/lang.js"></script>
        <script>
            var login_app = new Vue({
                el: '#login',
                data: ui_dat
            })
            document.getElementById('usn').placeholder = ui_dat['placeholder'];
            document.getElementById('pswd').placeholder = ui_dat['placeholder'];
        </script>
    </body>
</html>
